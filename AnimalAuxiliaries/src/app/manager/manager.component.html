<div class="managerContainer">
  <app-manager-nav></app-manager-nav>
  <div id="control">
    <div id="searchList">
      <label for="search-box" style="color: white">Need Search</label>
      <input
        #searchBox
        id="search-box"
        placeholder="Search here!"
        (input)="search(searchBox.value)"
      />

      <ul *ngIf="searchBox.value == ''; else searchNeeds">
        <li class="needItem" *ngFor="let need of needs">
          <h2 class="badge">{{ need.name }}</h2>
          <div style="display: flex; align-items: center; padding-top: 0.25rem">
            <button
              type="button"
              class="deleteBtn"
              title="delete need"
              (click)="deleteConfirm = need"
            >
              Delete
            </button>
            <button (click)="onPress(need)" class="btn">Edit</button>
          </div>
          <div id="comp-render" *ngIf="need.display">
            <div class="need-container">
              <div class="need-align">
                <label for="need-name">Name: </label>

                <input
                  id="need-name"
                  [(ngModel)]="need.name"
                  placeholder="need name"
                />
              </div>
              <div class="need-align">
                <label for="need-description">Description:</label>
                <input
                  id="need-description"
                  [(ngModel)]="need.description"
                  placeholder="need description"
                />
              </div>
              <div class="need-align">
                <label for="need-Type">Type: </label>
                <input
                  id="need-type"
                  [(ngModel)]="need.type"
                  placeholder="need type"
                />
              </div>

              <div class="need-align">
                <label for="need-price">Price: </label>
                <input
                  id="need-price"
                  [(ngModel)]="need.price"
                  placeholder="need price"
                />
              </div>
              <div class="need-align">
                <label for="need-quantity">Quantity: </label>
                <input
                  id="need-quantity"
                  [(ngModel)]="need.quantity"
                  placeholder="need quantity"
                />
              </div>
              <div class="need-align">
                <label for="need-image-link">Image Link: </label>
                <input
                  id="need-image-link"
                  [(ngModel)]="need.imgSrc"
                  placeholder="need image link"
                />
              </div>
            </div>
            <button
              type="button"
              (click)="save(need)"
              class="btn left-zero-marg"
              style="margin-left: 0; margin-top: 0.5rem"
            >
              Save
            </button>
          </div>
          <div class="modal-container" *ngIf="deleteConfirm === need">
            <div class="modal">
              <div class="modal-header">
                Are you sure you'd like to delete the need: {{ need.name }}
              </div>
              <p class="modal-desc">This action is irreversable!!</p>

              <div class="modal-btns">
                <button class="deleteBtn close-button" (click)="delete(need)">
                  Yes!
                </button>
                <button
                  class="greenBtn close-button"
                  (click)="deleteConfirm = null"
                >
                  No!
                </button>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </div>
    <ng-template #searchNeeds id="searchList">
      <ul>
        <li *ngFor="let need of needs$ | async">
          <h2 class="badge">{{ need.name }}</h2>
          <div style="display: flex; align-items: center; padding-top: 0.25rem">
            <button
              type="button"
              class="deleteBtn"
              title="delete need"
              (click)="deleteConfirm = need"
            >
              Delete
            </button>
            <button (click)="onPress(need)" class="btn">Edit</button>
          </div>
          <div id="comp-render" *ngIf="need.display">
            <div class="need-container">
              <div class="need-align">
                <label for="need-name">Name: </label>

                <input
                  id="need-name"
                  [(ngModel)]="need.name"
                  placeholder="need name"
                />
              </div>
              <div class="need-align">
                <label for="need-description">Description:</label>
                <input
                  id="need-description"
                  [(ngModel)]="need.description"
                  placeholder="need description"
                />
              </div>
              <div class="need-align">
                <label for="need-Type">Type: </label>
                <input
                  id="need-type"
                  [(ngModel)]="need.type"
                  placeholder="need type"
                />
              </div>

              <div class="need-align">
                <label for="need-price">Price: </label>
                <input
                  id="need-price"
                  [(ngModel)]="need.price"
                  placeholder="need price"
                />
              </div>
              <div class="need-align">
                <label for="need-quantity">Quantity: </label>
                <input
                  id="need-quantity"
                  [(ngModel)]="need.quantity"
                  placeholder="need quantity"
                />
              </div>
              <div class="need-align">
                <label for="need-image-link">Image Link: </label>
                <input
                  id="need-image-link"
                  [(ngModel)]="need.imgSrc"
                  placeholder="need image link"
                />
              </div>
            </div>
            <button
              type="button"
              (click)="save(need)"
              class="btn left-zero-marg"
              style="margin-left: 0; margin-top: 0.5rem"
            >
              Save
            </button>
          </div>
          <div class="modal-container" *ngIf="deleteConfirm === need">
            <div class="modal">
              <div class="modal-header">
                Are you sure you'd like to delete the need: {{ need.name }}
              </div>
              <p class="modal-desc">This action is irreversable!!</p>
              <div class="modal-btns">
                <button class="deleteBtn close-button" (click)="delete(need)">
                  Yes!
                </button>
                <button
                  class="greenBtn close-button"
                  (click)="deleteConfirm = null"
                >
                  No!
                </button>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </ng-template>
    <div>
      <div id="needList">
        <h2 style="text-align: center">Create A Need</h2>
        <ul id="inputStyles">
          <li>
            <label for="new-need">Name: </label
            ><input id="new-need" #needName class="labelStyles" />
          </li>
          <li>
            <label for="new-need">Description: </label
            ><input id="new-need" #needDescription class="labelStyles" />
          </li>
          <li>
            <label for="new-need">Type: </label
            ><input id="new-need" #needType class="labelStyles" />
          </li>
          <li>
            <label for="new-need">Price: </label
            ><input
              id="new-need"
              #needPrice
              class="labelStyles"
              type="number"
            />
          </li>
          <li>
            <label for="new-need">Quantity: </label
            ><input
              id="new-need"
              #needQuantity
              class="labelStyles"
              type="number"
            />
          </li>
        </ul>
        <p class="center" id="errorMessage"></p>
        <button
          type="button"
          class="btn center"
          (click)="
            add(
              needName.value,
              needDescription.value,
              needType.value,
              needPrice.value,
              needQuantity.value,
              ''
            )
          "
          style="font-family: Poppins; align-self: flex-end"
        >
          Add need
        </button>
      </div>
      <div id="needList">
        <h2 style="text-align: center">Create An Animal</h2>
        <ul id="inputStyles">
          <li>
            <label for="new-animal">Name: </label
            ><input id="new-animal" #animalName class="labelStyles" />
          </li>
          <li>
            <label for="new-animal">Description: </label
            ><input id="new-animal" #animalDescription class="labelStyles" />
          </li>
          <li>
            <label for="new-animal">Species: </label
            ><input id="new-animal" #animalSpecies class="labelStyles" />
          </li>
          <li>
            <label for="new-animal">Image: </label
            ><input id="new-animal" #animalImage class="labelStyles" />
          </li>
        </ul>
        <p class="center" id="errorMessageAnimal"></p>
        <button
          type="button"
          class="btn center"
          (click)="
            addAnimal(
              animalName.value,
              animalDescription.value,
              animalSpecies.value,
              animalImage.value,
              false
            )
          "
          style="font-family: Poppins; align-self: flex-end"
        >
          Add Animal
        </button>
        <ul style="margin-top: 0.5rem">
          <li *ngFor="let animal of animals">
            {{ animal.name }}
            <button
              type="button"
              class="deleteBtn"
              title="delete post"
              (click)="deleteConfirmAnimal = animal"
            >
              Delete
            </button>
            <div class="modal-container" *ngIf="deleteConfirmAnimal === animal">
              <div class="modal">
                <div class="modal-header">
                  Are you sure you'd like to delete the animal:
                  {{ animal.name }}
                </div>
                <p class="modal-desc">This action is irreversable!!</p>
                <div class="modal-btns">
                  <button
                    class="deleteBtn close-button"
                    (click)="deleteAnimal(animal)"
                  >
                    Yes!
                  </button>
                  <button
                    class="greenBtn close-button"
                    (click)="deleteConfirmAnimal = null"
                  >
                    No!
                  </button>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <div id="needList">
      <h2 style="text-align: center">Create A Post</h2>
      <ul style="margin-top: 0.5rem" id="inputStyles">
        <li>
          <label for="new-post">Title: </label
          ><input id="new-post" #postTitle class="labelStyles" />
        </li>
        <li>
          <label for="new-post">Content: </label
          ><input id="new-post" #postContent class="labelStyles" />
        </li>
      </ul>
      <p class="center" id="errorMessage"></p>
      <p class="center" id="errorMessagePost"></p>
      <button
        type="button"
        class="btn center"
        (click)="addPost(postTitle.value, postContent.value)"
        style="font-family: Poppins; align-self: flex-end"
      >
        Add Post
      </button>
      <ul style="margin-top: 0.5rem">
        <li *ngFor="let post of posts">
          {{ post.title }}
          <button
            type="button"
            class="deleteBtn"
            title="delete post"
            (click)="deleteConfirmPost = post"
          >
            Delete
          </button>
          <div class="modal-container" *ngIf="deleteConfirmPost === post">
            <div class="modal">
              <div class="modal-header">
                Are you sure you'd like to delete the post: {{ post.title }}
              </div>
              <p class="modal-desc">This action is irreversable!!</p>
              <div class="modal-btns">
                <button
                  class="deleteBtn close-button"
                  (click)="deletePost(post)"
                >
                  Yes!
                </button>
                <button
                  class="greenBtn close-button"
                  (click)="deleteConfirmPost = null"
                >
                  No!
                </button>
              </div>
            </div>
          </div>
          
        </li>
      </ul>
    </div>
  </div>
</div>
